{{- /* Shortcode ƒë·ªÉ t·ª± ƒë·ªông hi·ªÉn th·ªã t·∫•t c·∫£ ·∫£nh ch·ª©ng ch·ªâ v√† PDF trong folder */ -}}
{{- $certDir := "certificates/images/" -}}
{{- $certPath := path.Join "static" $certDir -}}
{{- $files := readDir $certPath -}}
{{- $imageExts := slice "jpg" "jpeg" "png" "JPG" "JPEG" "PNG" -}}
{{- $pdfExts := slice "pdf" "PDF" -}}
{{- $certFiles := slice -}}
{{- range $files -}}
  {{- $ext := strings.TrimPrefix "." (path.Ext .Name) -}}
  {{- if or (in $imageExts $ext) (in $pdfExts $ext) -}}
    {{- $certFiles = $certFiles | append . -}}
  {{- end -}}
{{- end -}}

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
  {{- if $certFiles -}}
    {{- range $certFiles -}}
      {{- $filePath := (print $certDir .Name) | absURL -}}
      {{- $fileName := strings.TrimSuffix (path.Ext .Name) .Name -}}
      {{- $ext := strings.TrimPrefix "." (path.Ext .Name) -}}
      {{- $isPDF := in $pdfExts $ext -}}
      <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px; transition: transform 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <a href="{{ $filePath }}" target="_blank" style="text-decoration: none; display: block;">
          <div style="margin-bottom: 15px; background: white; border-radius: 5px; padding: 10px; overflow: hidden; min-height: 280px; max-height: 280px; display: flex; align-items: center; justify-content: center; position: relative;">
            {{- if $isPDF -}}
              {{- /* Hi·ªÉn th·ªã card PDF ƒë·∫πp v·ªõi icon */ -}}
              <div style="flex-direction: column; align-items: center; justify-content: center; font-size: 80px; color: white; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 5px; cursor: pointer; transition: transform 0.3s ease; display: flex;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                <div style="font-size: 80px; margin-bottom: 15px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2));">üìÑ</div>
                <p style="font-size: 20px; color: white; margin: 0; font-weight: bold; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">PDF Ch·ª©ng Ch·ªâ</p>
                <p style="font-size: 14px; color: rgba(255,255,255,0.95); margin-top: 8px;">Nh·∫•n ƒë·ªÉ xem PDF</p>
              </div>
            {{- else -}}
              {{- /* Hi·ªÉn th·ªã ·∫£nh */ -}}
              <img src="{{ $filePath }}" alt="{{ $fileName }}" style="width: 100%; height: 100%; max-width: 100%; max-height: 260px; object-fit: contain; border-radius: 5px; cursor: pointer; display: block !important; margin: 0 auto; background: transparent; position: relative; z-index: 1;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" onload="this.style.opacity='1';">
              {{- /* Fallback n·∫øu ·∫£nh kh√¥ng load ƒë∆∞·ª£c */ -}}
              <div style="display: none; flex-direction: column; align-items: center; justify-content: center; font-size: 64px; color: #3498db; position: absolute; width: 100%; height: 100%; top: 0; left: 0;">
                üìÑ
                <p style="font-size: 14px; color: #7f8c8d; margin-top: 15px;">Kh√¥ng th·ªÉ t·∫£i ·∫£nh</p>
              </div>
            {{- end -}}
          </div>
          <h4 style="margin: 10px 0; color: #2c3e50;">{{ $fileName | humanize | title }}</h4>
          <p style="color: #3498db; font-size: 14px; margin: 5px 0;">
            {{- if $isPDF -}}
              Nh·∫•n ƒë·ªÉ xem/t·∫£i PDF
            {{- else -}}
              Nh·∫•n ·∫£nh ƒë·ªÉ xem to√†n m√†n h√¨nh
            {{- end -}}
          </p>
        </a>
      </div>
    {{- end -}}
  {{- else -}}
    <div style="text-align: center; padding: 30px; color: #7f8c8d; grid-column: 1 / -1;">
      <p style="font-size: 16px;">üìÅ Ch∆∞a c√≥ ·∫£nh ch·ª©ng ch·ªâ n√†o trong folder.</p>
      <p style="font-size: 14px; margin-top: 10px;">Vui l√≤ng ƒë·∫∑t ·∫£nh ho·∫∑c PDF v√†o folder: <code>static/certificates/images/</code></p>
    </div>
  {{- end -}}
</div>

<p style="margin-top: 20px; color: #7f8c8d; font-size: 14px; text-align: center;">
  üí° <strong>L∆∞u √Ω:</strong> ƒê·∫∑t ·∫£nh (JPG, PNG) ho·∫∑c PDF ch·ª©ng ch·ªâ v√†o folder <code>static/certificates/images/</code> v·ªõi <strong>b·∫•t k·ª≥ t√™n n√†o</strong>. 
  <strong>Khuy·∫øn ngh·ªã:</strong> Ch·ª•p m√†n h√¨nh PDF th√†nh PNG ƒë·ªÉ hi·ªÉn th·ªã t·ªët h∆°n (xem h∆∞·ªõng d·∫´n trong folder). H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông hi·ªÉn th·ªã t·∫•t c·∫£ file trong folder.
</p>

